<tool id="get_TCGA_Methylation_data" name="Unpack TCGA 450k data" version="1.0">
    <description>Unpack 450k methylation arrays which are in IDAT format from TCGA cancer datasets hosted on GDAC</description>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command>
        <![CDATA[
        python $__tool_directory__/get_TCGA_Methylation_data.py $input && mv "*/MANIFEST.txt" .
        && mv "*/*.data.txt" output_data.txt
        ]]>
    </command>
    <inputs>
      <param name="input" type="data" format=".tar"/>
  </inputs>
  <outputs>
    <data name="manifest" format="txt" label="File Manifest" from_work_dir="MANIFEST.txt" />
    <data name="data" format="txt" label="Probe and Sample wise data" from_work_dir="output_data.txt" />
</outputs>
<help>
    **What it does**

    Unpack TCGA 450k methylation data from Gdac(hosted by Broad institute).

    To fetch the TCGA data, use the galaxy upload tool. Using the "Paste/Fetch data" option, paste the GDAC url and start the download process. This will make the file available to you as a galaxy history item.

    (NOTE: This fetch via the ftp GDAC client takes a while, as the files are usually on the order of a few gigabytes)

    **Input**:

    GDAC link from a illumina human methylation array from TCGA

    *Example input*:

    http://gdac.broadinstitute.org/runs/stddata__2014_10_17/data/UCEC/20141017/gdac.broadinstitute.org_UCEC.Merge_methylation__humanmethylation450__jhu_usc_edu__Level_3__within_bioassay_data_set_function__data.Level_3.2014101700.0.0.tar.gz

    **Output**: This results in a two file output

    1. Manifest for the files

    2. Probe wise methylation values (.data.txt) --> This is the file you want to use for the resulting steps.

</help>
<citations>
    <citation>http://gdac.broadinstitute.org/</citation>
</citations>
</tool>
<!--
    <outputs>
        <data name="manifest" format="txt" label="File Manifest" from_work_dir="gdac.broadinstitute.org_UCEC.Merge_methylation__humanmethylation450__jhu_usc_edu__Level_3__within_bioassay_data_set_function__data.Level_3.2014101700.0.0/MANIFEST.txt" />
        <data name="data" format="txt" label="Probe and Sample wise data" from_work_dir="gdac.broadinstitute.org_UCEC.Merge_methylation__humanmethylation450__jhu_usc_edu__Level_3__within_bioassay_data_set_function__data.Level_3.2014101700.0.0/UCEC.methylation__humanmethylation450__jhu_usc_edu__Level_3__within_bioassay_data_set_function__data.data.txt" />
    </outputs>
-->